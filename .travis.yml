install:
  - curl -O http://static.rust-lang.org/dist/rust-nightly-x86_64-unknown-linux-gnu.tar.gz
  - tar xf rust-nightly-x86_64-unknown-linux-gnu.tar.gz
  - sudo ./rust-nightly-x86_64-unknown-linux-gnu/install.sh

  - curl -O http://static.rust-lang.org/cargo-dist/cargo-nightly-linux.tar.gz
  - tar xf cargo-nightly-linux.tar.gz
  - sudo ./cargo-nightly/install.sh

  - sudo pip install ghp-import

script:
  - cargo build
  - cargo test
  - rustdoc src/url.rs -L target/deps

after_success:
  - ghp-import -n doc
  - git push -fq https://${TOKEN}@github.com/${TRAVIS_REPO_SLUG}.git gh-pages

env:
  - secure: DoxnyDvhhRocCKtvyRe0Wa4P/zwhEcSH67kSa1f+KMuLzZQqIxFqCGTha2KzKyuymMMVyUC1Is+MWzVjBtAaIHCm07Do/TH9rWijTZx0pWK9bJ8idxzycGTsZJEyzDQbkpGNRsAfygxwP2r+K6VSE6MDg2M6AjnSLzpjWMLqr+s=
